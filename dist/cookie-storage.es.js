const p=t=>{const{sameSite:e}=t;return typeof e>"u"?null:["none","lax","strict"].indexOf(e.toLowerCase())>=0?e:null},a=t=>{const{path:e,domain:o,expires:n,secure:r}=t,s=p(t);return[typeof e>"u"||e===null?"":";path="+e,typeof o>"u"||o===null?"":";domain="+o,typeof n>"u"||n===null?"":";expires="+n.toUTCString(),typeof r>"u"||r===!1?"":";secure",s===null?"":";SameSite="+s].join("")},u=(t,e,o)=>[encodeURIComponent(t),"=",encodeURIComponent(e),a(o)].join(""),i=t=>{if(t.length===0)return{};const e={},o=new RegExp("\\s*;\\s*");return t.split(o).forEach(n=>{const[r,s]=n.split("="),l=decodeURIComponent(r),c=decodeURIComponent(s);e[l]=c}),e};class g{constructor(e){if(this._defaultOptions={domain:null,expires:null,path:null,secure:!1,...e},typeof Proxy<"u")return new Proxy(this,m)}get length(){const e=i(this._getCookie());return Object.keys(e).length}clear(){const e=i(this._getCookie());Object.keys(e).forEach(o=>this.removeItem(o))}getItem(e){const o=i(this._getCookie());return Object.prototype.hasOwnProperty.call(o,e)?o[e]:null}key(e){const o=i(this._getCookie()),n=Object.keys(o).sort();return e<n.length?n[e]:null}removeItem(e,o){const n="",r={...this._defaultOptions,...o,expires:new Date(0)},s=u(e,n,r);this._setCookie(s)}setItem(e,o,n){const r={...this._defaultOptions,...n},s=u(e,o,r);this._setCookie(s)}_getCookie(){return typeof document>"u"||typeof document.cookie>"u"?"":document.cookie}_setCookie(e){document.cookie=e}}const m={defineProperty(t,e,o){return t.setItem(e.toString(),String(o.value)),!0},deleteProperty(t,e){return t.removeItem(e.toString()),!0},get(t,e,o){if(typeof e=="string"&&e in t)return t[e];const n=t.getItem(e.toString());return n!==null?n:void 0},getOwnPropertyDescriptor(t,e){if(!(e in t))return{configurable:!0,enumerable:!0,value:t.getItem(e.toString()),writable:!0}},has(t,e){return typeof e=="string"&&e in t?!0:t.getItem(e.toString())!==null},ownKeys(t){const e=[];for(let o=0;o<t.length;o++){const n=t.key(o);n!==null&&e.push(n)}return e},preventExtensions(t){throw new TypeError("can't prevent extensions on this proxy object")},set(t,e,o,n){return t.setItem(e.toString(),String(o)),!0}};export{g as CookieStorage,u as formatCookie,i as parseCookies};
